-- 國一數學上學期：章節與題型（依技能樹建立）
-- 章節 ID 規則：m1-{章}-{節}
-- 題型 ID 規則：{chapter_id}-{序號}（序號對應 S01=1, S02=2...）
-- 題型代碼：S01, S02, ...

-- 1) 章節
INSERT INTO chapters (id, title, sort_order, is_active, grade_id, term)
VALUES
  ('m1-1-1', '負數與數線', 1, true, 'J1-MATH', 'upper'),
  ('m1-1-2', '整數的加減運算', 2, true, 'J1-MATH', 'upper'),
  ('m1-1-3', '整數的乘除與四則運算', 3, true, 'J1-MATH', 'upper'),
  ('m1-1-4', '指數記法與科學記號', 4, true, 'J1-MATH', 'upper'),
  ('m1-2-1', '因數與倍數', 5, true, 'J1-MATH', 'upper'),
  ('m1-2-2', '最大公因數與最小公倍數', 6, true, 'J1-MATH', 'upper'),
  ('m1-2-3', '分數的四則運算', 7, true, 'J1-MATH', 'upper'),
  ('m1-2-4', '指數律', 8, true, 'J1-MATH', 'upper'),
  ('m1-3-1', '代數式', 9, true, 'J1-MATH', 'upper'),
  ('m1-3-2', '一元一次方程式', 10, true, 'J1-MATH', 'upper'),
  ('m1-3-3', '一元一次應用問題', 11, true, 'J1-MATH', 'upper')
ON CONFLICT (id) DO UPDATE SET
  title = EXCLUDED.title,
  sort_order = EXCLUDED.sort_order,
  is_active = EXCLUDED.is_active,
  grade_id = EXCLUDED.grade_id,
  term = EXCLUDED.term;

-- 2) 題型（依技能樹）
INSERT INTO question_types (id, chapter_id, name, code, description, sort_order, is_active)
VALUES
  -- 1-1 負數與數線
  ('m1-1-1-1', 'm1-1-1', '整數的意義與分類', 'S01', NULL, 1, true),
  ('m1-1-1-2', 'm1-1-1', '正負數大小關係', 'S02', NULL, 2, true),
  ('m1-1-1-3', 'm1-1-1', '數線的幾何意義', 'S03', NULL, 3, true),
  ('m1-1-1-4', 'm1-1-1', '相反數的意義', 'S04', NULL, 4, true),
  ('m1-1-1-5', 'm1-1-1', '絕對值的意義（距離觀點）', 'S05', NULL, 5, true),
  ('m1-1-1-6', 'm1-1-1', '兩點距離與差的絕對值', 'S06', NULL, 6, true),
  ('m1-1-1-7', 'm1-1-1', '在數線上標示整數', 'S07', NULL, 7, true),
  ('m1-1-1-8', 'm1-1-1', '由數線讀出整數', 'S08', NULL, 8, true),
  ('m1-1-1-9', 'm1-1-1', '比較兩整數大小的操作流程', 'S09', NULL, 9, true),
  ('m1-1-1-10', 'm1-1-1', '求相反數的步驟', 'S10', NULL, 10, true),
  ('m1-1-1-11', 'm1-1-1', '求絕對值的步驟', 'S11', NULL, 11, true),
  ('m1-1-1-12', 'm1-1-1', '計算兩點距離', 'S12', NULL, 12, true),
  ('m1-1-1-13', 'm1-1-1', '閱讀含多點的數線圖', 'S13', NULL, 13, true),
  ('m1-1-1-14', 'm1-1-1', '溫度變化問題', 'S14', NULL, 14, true),
  ('m1-1-1-15', 'm1-1-1', '海拔與深度應用', 'S15', NULL, 15, true),
  ('m1-1-1-16', 'm1-1-1', '金錢收支與負債問題', 'S16', NULL, 16, true),
  ('m1-1-1-17', 'm1-1-1', '水平移動與位移問題', 'S17', NULL, 17, true),

  -- 1-2 整數的加減運算
  ('m1-1-2-1', 'm1-1-2', '整數加法的意義', 'S01', NULL, 1, true),
  ('m1-1-2-2', 'm1-1-2', '整數減法的意義', 'S02', NULL, 2, true),
  ('m1-1-2-3', 'm1-1-2', '同號相加與異號相減規則', 'S03', NULL, 3, true),
  ('m1-1-2-4', 'm1-1-2', '加減混合運算的結合觀念', 'S04', NULL, 4, true),
  ('m1-1-2-5', 'm1-1-2', '使用數線進行整數加法', 'S05', NULL, 5, true),
  ('m1-1-2-6', 'm1-1-2', '使用數線進行整數減法', 'S06', NULL, 6, true),
  ('m1-1-2-7', 'm1-1-2', '多個整數加減的計算策略', 'S07', NULL, 7, true),
  ('m1-1-2-8', 'm1-1-2', '用括號與符號處理複雜加減式', 'S08', NULL, 8, true),
  ('m1-1-2-9', 'm1-1-2', '估算整數加減的結果範圍', 'S09', NULL, 9, true),
  ('m1-1-2-10', 'm1-1-2', '溫度變化的加減運用', 'S10', NULL, 10, true),
  ('m1-1-2-11', 'm1-1-2', '金錢收支與帳戶餘額', 'S11', NULL, 11, true),
  ('m1-1-2-12', 'm1-1-2', '樓層與高度變化', 'S12', NULL, 12, true),
  ('m1-1-2-13', 'm1-1-2', '綜合情境（行程＋收支等）', 'S13', NULL, 13, true),

  -- 1-3 整數的乘除與四則運算
  ('m1-1-3-1', 'm1-1-3', '乘法作為重複加法', 'S01', NULL, 1, true),
  ('m1-1-3-2', 'm1-1-3', '整數乘法的正負號規則', 'S02', NULL, 2, true),
  ('m1-1-3-3', 'm1-1-3', '除法與乘法的互逆關係', 'S03', NULL, 3, true),
  ('m1-1-3-4', 'm1-1-3', '四則運算順序', 'S04', NULL, 4, true),
  ('m1-1-3-5', 'm1-1-3', '計算兩整數的乘積', 'S05', NULL, 5, true),
  ('m1-1-3-6', 'm1-1-3', '計算整數除法（整除情況）', 'S06', NULL, 6, true),
  ('m1-1-3-7', 'm1-1-3', '多因數整數乘法的計算策略', 'S07', NULL, 7, true),
  ('m1-1-3-8', 'm1-1-3', '含乘除的混合運算', 'S08', NULL, 8, true),
  ('m1-1-3-9', 'm1-1-3', '含括號的四則運算', 'S09', NULL, 9, true),
  ('m1-1-3-10', 'm1-1-3', '重複變化的問題（如得分遊戲）', 'S10', NULL, 10, true),
  ('m1-1-3-11', 'm1-1-3', '平均分配與反向思考', 'S11', NULL, 11, true),
  ('m1-1-3-12', 'm1-1-3', '含負數的實際問題（如賺錢與虧損）', 'S12', NULL, 12, true),
  ('m1-1-3-13', 'm1-1-3', '整數四則的綜合應用', 'S13', NULL, 13, true),

  -- 1-4 指數記法與科學記號
  ('m1-1-4-1', 'm1-1-4', '乘方的意義', 'S01', NULL, 1, true),
  ('m1-1-4-2', 'm1-1-4', '10 的次方與位值系統', 'S02', NULL, 2, true),
  ('m1-1-4-3', 'm1-1-4', '科學記號的形式', 'S03', NULL, 3, true),
  ('m1-1-4-4', 'm1-1-4', '由乘法改寫成乘方', 'S04', NULL, 4, true),
  ('m1-1-4-5', 'm1-1-4', '將大數改寫為科學記號', 'S05', NULL, 5, true),
  ('m1-1-4-6', 'm1-1-4', '將小數改寫為科學記號', 'S06', NULL, 6, true),
  ('m1-1-4-7', 'm1-1-4', '由科學記號還原成一般數', 'S07', NULL, 7, true),
  ('m1-1-4-8', 'm1-1-4', '運用 10 的次方做簡單乘除', 'S08', NULL, 8, true),
  ('m1-1-4-9', 'm1-1-4', '比較兩個以科學記號表示的數大小', 'S09', NULL, 9, true),
  ('m1-1-4-10', 'm1-1-4', '閱讀生活與科學資料中的科學記號', 'S10', NULL, 10, true),
  ('m1-1-4-11', 'm1-1-4', '估算與比較不同量級的數', 'S11', NULL, 11, true),

  -- 2-1 因數與倍數
  ('m1-2-1-1', 'm1-2-1', '因數與倍數的基本定義', 'S01', NULL, 1, true),
  ('m1-2-1-2', 'm1-2-1', '整除的概念', 'S02', NULL, 2, true),
  ('m1-2-1-3', 'm1-2-1', '質數、合成數與 1 的角色', 'S03', NULL, 3, true),
  ('m1-2-1-4', 'm1-2-1', '質因數分解的意義', 'S04', NULL, 4, true),
  ('m1-2-1-5', 'm1-2-1', '列舉法找因數', 'S05', NULL, 5, true),
  ('m1-2-1-6', 'm1-2-1', '運用整除規則判斷因數', 'S06', NULL, 6, true),
  ('m1-2-1-7', 'm1-2-1', '用短除法做質因數分解', 'S07', NULL, 7, true),
  ('m1-2-1-8', 'm1-2-1', '用指數記號表示質因數分解結果', 'S08', NULL, 8, true),
  ('m1-2-1-9', 'm1-2-1', '因數與平均分配問題', 'S09', NULL, 9, true),
  ('m1-2-1-10', 'm1-2-1', '倍數與週期性問題', 'S10', NULL, 10, true),

  -- 2-2 最大公因數與最小公倍數
  ('m1-2-2-1', 'm1-2-2', '最大公因數 GCD 的意義', 'S01', NULL, 1, true),
  ('m1-2-2-2', 'm1-2-2', '最小公倍數 LCM 的意義', 'S02', NULL, 2, true),
  ('m1-2-2-3', 'm1-2-2', 'GCD 與 LCM 的關係直覺', 'S03', NULL, 3, true),
  ('m1-2-2-4', 'm1-2-2', '用列舉法求 GCD', 'S04', NULL, 4, true),
  ('m1-2-2-5', 'm1-2-2', '用列舉法求 LCM', 'S05', NULL, 5, true),
  ('m1-2-2-6', 'm1-2-2', '用質因數分解求 GCD', 'S06', NULL, 6, true),
  ('m1-2-2-7', 'm1-2-2', '用質因數分解求 LCM', 'S07', NULL, 7, true),
  ('m1-2-2-8', 'm1-2-2', '用 GCD 解平均分組問題', 'S08', NULL, 8, true),
  ('m1-2-2-9', 'm1-2-2', '用 LCM 解週期遇合問題', 'S09', NULL, 9, true),
  ('m1-2-2-10', 'm1-2-2', '綜合使用 GCD 與 LCM 的應用', 'S10', NULL, 10, true),

  -- 2-3 分數的四則運算
  ('m1-2-3-1', 'm1-2-3', '最簡分數與約分意義', 'S01', NULL, 1, true),
  ('m1-2-3-2', 'm1-2-3', '同分母分數加減的意義', 'S02', NULL, 2, true),
  ('m1-2-3-3', 'm1-2-3', '異分母分數加減與通分概念', 'S03', NULL, 3, true),
  ('m1-2-3-4', 'm1-2-3', '分數乘法的意義', 'S04', NULL, 4, true),
  ('m1-2-3-5', 'm1-2-3', '分數除法與倒數', 'S05', NULL, 5, true),
  ('m1-2-3-6', 'm1-2-3', '約分與擴分操作', 'S06', NULL, 6, true),
  ('m1-2-3-7', 'm1-2-3', '同分母分數加減計算', 'S07', NULL, 7, true),
  ('m1-2-3-8', 'm1-2-3', '異分母分數通分與加減', 'S08', NULL, 8, true),
  ('m1-2-3-9', 'm1-2-3', '分數乘法計算與約分', 'S09', NULL, 9, true),
  ('m1-2-3-10', 'm1-2-3', '分數除法計算', 'S10', NULL, 10, true),
  ('m1-2-3-11', 'm1-2-3', '帶分數與假分數轉換', 'S11', NULL, 11, true),
  ('m1-2-3-12', 'm1-2-3', '分數四則解決份量問題', 'S12', NULL, 12, true),
  ('m1-2-3-13', 'm1-2-3', '時間、距離、速率中的分數運用', 'S13', NULL, 13, true),
  ('m1-2-3-14', 'm1-2-3', '綜合四則混合運算情境', 'S14', NULL, 14, true),

  -- 2-4 指數律
  ('m1-2-4-1', 'm1-2-4', '同底數乘法指數相加', 'S01', NULL, 1, true),
  ('m1-2-4-2', 'm1-2-4', '同底數除法指數相減', 'S02', NULL, 2, true),
  ('m1-2-4-3', 'm1-2-4', '冪的冪指數相乘', 'S03', NULL, 3, true),
  ('m1-2-4-4', 'm1-2-4', '運用指數律化簡同底數乘除式', 'S04', NULL, 4, true),
  ('m1-2-4-5', 'm1-2-4', '將含 10 的冪的式子整理成單一 10 的冪', 'S05', NULL, 5, true),
  ('m1-2-4-6', 'm1-2-4', '結合科學記號時的指數操作', 'S06', NULL, 6, true),
  ('m1-2-4-7', 'm1-2-4', '在大數與小數估算中的應用', 'S07', NULL, 7, true),

  -- 3-1 代數式
  ('m1-3-1-1', 'm1-3-1', '變數與常數概念', 'S01', NULL, 1, true),
  ('m1-3-1-2', 'm1-3-1', '代數式的項與係數', 'S02', NULL, 2, true),
  ('m1-3-1-3', 'm1-3-1', '同類項與代數式次數', 'S03', NULL, 3, true),
  ('m1-3-1-4', 'm1-3-1', '由文字敘述寫出代數式', 'S04', NULL, 4, true),
  ('m1-3-1-5', 'm1-3-1', '合併同類項', 'S05', NULL, 5, true),
  ('m1-3-1-6', 'm1-3-1', '代入數值求代數式的值', 'S06', NULL, 6, true),
  ('m1-3-1-7', 'm1-3-1', '建立簡單的代數模型（周長、面積）', 'S07', NULL, 7, true),
  ('m1-3-1-8', 'm1-3-1', '用代數式表示費用或收入', 'S08', NULL, 8, true),

  -- 3-2 一元一次方程式
  ('m1-3-2-1', 'm1-3-2', '方程式與等式的差別', 'S01', NULL, 1, true),
  ('m1-3-2-2', 'm1-3-2', '一元一次方程式的形式', 'S02', NULL, 2, true),
  ('m1-3-2-3', 'm1-3-2', '解的意義與驗證', 'S03', NULL, 3, true),
  ('m1-3-2-4', 'm1-3-2', '由文字敘述列出一元一次方程式', 'S04', NULL, 4, true),
  ('m1-3-2-5', 'm1-3-2', '等式兩邊同時加減', 'S05', NULL, 5, true),
  ('m1-3-2-6', 'm1-3-2', '等式兩邊同乘除', 'S06', NULL, 6, true),
  ('m1-3-2-7', 'm1-3-2', '整理項次與移項', 'S07', NULL, 7, true),
  ('m1-3-2-8', 'm1-3-2', '解完後代入檢查', 'S08', NULL, 8, true),
  ('m1-3-2-9', 'm1-3-2', '簡單應用題列式與求解', 'S09', NULL, 9, true),
  ('m1-3-2-10', 'm1-3-2', '含括號或多步驟的應用題', 'S10', NULL, 10, true),

  -- 3-3 一元一次應用問題
  ('m1-3-3-1', 'm1-3-3', '從文字題抽出未知量與關係', 'S01', NULL, 1, true),
  ('m1-3-3-2', 'm1-3-3', '選擇適當的未知數表示方式', 'S02', NULL, 2, true),
  ('m1-3-3-3', 'm1-3-3', '將情境轉換為一元一次方程式', 'S03', NULL, 3, true),
  ('m1-3-3-4', 'm1-3-3', '解應用題方程式並檢查解釋', 'S04', NULL, 4, true),
  ('m1-3-3-5', 'm1-3-3', '價錢與折扣問題的建模', 'S05', NULL, 5, true),
  ('m1-3-3-6', 'm1-3-3', '行程問題（速度、時間、距離）', 'S06', NULL, 6, true),
  ('m1-3-3-7', 'm1-3-3', '工作與效率問題', 'S07', NULL, 7, true),
  ('m1-3-3-8', 'm1-3-3', '年齡、數量與差的問題', 'S08', NULL, 8, true),
  ('m1-3-3-9', 'm1-3-3', '綜合文字題的解題策略', 'S09', NULL, 9, true)
ON CONFLICT (id) DO UPDATE SET
  chapter_id = EXCLUDED.chapter_id,
  name = EXCLUDED.name,
  code = EXCLUDED.code,
  description = EXCLUDED.description,
  sort_order = EXCLUDED.sort_order,
  is_active = EXCLUDED.is_active;


