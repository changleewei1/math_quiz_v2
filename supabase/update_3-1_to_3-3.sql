-- 更新章節名稱
-- 3-1: 代數式（一元一次式化簡）
-- 3-2: 一元一次方程式（解一元一次方程式）
-- 3-3: 一元一次應用問題（一元一次方程式應用問題）

-- 更新章節
UPDATE chapters SET title = '一元一次式化簡' WHERE id = '3-1';
UPDATE chapters SET title = '一元一次方程式計算' WHERE id = '3-2';
UPDATE chapters SET title = '一元一次方程式應用問題' WHERE id = '3-3';

-- 先刪除舊的題型（注意：這會影響關聯的題目，請先備份）
-- 如果有題目關聯到這些題型，需要先處理
DELETE FROM question_types WHERE chapter_id = '3-1';
DELETE FROM question_types WHERE chapter_id = '3-2';
DELETE FROM question_types WHERE chapter_id = '3-3';

-- 插入新的題型
-- 3-1 代數式（一元一次式化簡）
INSERT INTO question_types (id, chapter_id, name, code, description, sort_order, is_active) VALUES
    ('3-1-S01', '3-1', '變數與常數概念', 'S01', '變數代表可變的數值，常數代表固定不變的數。', 1, true),
    ('3-1-S02', '3-1', '代數式的項與係數', 'S02', '一個代數式可由多個項組成，每一項有係數與變數部分。', 2, true),
    ('3-1-S03', '3-1', '同類項與代數式次數', 'S03', '同類項需變數與指數完全相同；代數式的次數是最高次項的指數。', 3, true),
    ('3-1-S04', '3-1', '由文字敘述寫出代數式', 'S04', '能將「比某數大5」、「長為x寬為3的矩形周長」等寫成代數式。', 4, true),
    ('3-1-S05', '3-1', '合併同類項', 'S05', '將同類項的係數相加減，簡化代數式。', 5, true),
    ('3-1-S06', '3-1', '代入數值求代數式的值', 'S06', '將變數以指定數值代入並計算結果。', 6, true),
    ('3-1-S07', '3-1', '建立簡單的代數模型（周長、面積）', 'S07', '用代數式表示幾何圖形的周長與面積。', 7, true),
    ('3-1-S08', '3-1', '用代數式表示費用或收入', 'S08', '如基本費＋單價×數量等情境。', 8, true);

-- 3-2 一元一次方程式（解一元一次方程式）
INSERT INTO question_types (id, chapter_id, name, code, description, sort_order, is_active) VALUES
    ('3-2-S01', '3-2', '方程式與等式的差別', 'S01', '等式敘述兩邊相等；方程式包含未知數，需要求使其成立的值。', 1, true),
    ('3-2-S02', '3-2', '一元一次方程式的形式', 'S02', '可寫成 ax+b=c 或 ax+b=0（a≠0），最高次數為1。', 2, true),
    ('3-2-S03', '3-2', '解的意義與驗證', 'S03', '解是使方程式成立的未知數值，需能代入驗證。', 3, true),
    ('3-2-S04', '3-2', '由文字敘述列出一元一次方程式', 'S04', '能正確選定未知數與寫出方程式。', 4, true),
    ('3-2-S05', '3-2', '等式兩邊同時加減', 'S05', '理解對等式兩邊做相同的加減運算不改變解。', 5, true),
    ('3-2-S06', '3-2', '等式兩邊同乘除', 'S06', '可對兩邊同乘或同除非0數來簡化方程式。', 6, true),
    ('3-2-S07', '3-2', '整理項次與移項', 'S07', '將含x的項移到同一邊，常數移到另一邊。', 7, true),
    ('3-2-S08', '3-2', '解完後代入檢查', 'S08', '將求得的解帶回原式，以確保無運算失誤。', 8, true),
    ('3-2-S09', '3-2', '簡單應用題列式與求解', 'S09', '處理「一個數」、「年齡差」、「價格」等情境。', 9, true),
    ('3-2-S10', '3-2', '含括號或多步驟的應用題', 'S10', '在較複雜敘述中仍能正確列出方程式並求解。', 10, true);

-- 3-3 一元一次應用問題（一元一次方程式應用問題）
INSERT INTO question_types (id, chapter_id, name, code, description, sort_order, is_active) VALUES
    ('3-3-S01', '3-3', '從文字題抽出未知量與關係', 'S01', '能抓出題目中的關鍵量與彼此關係。', 1, true),
    ('3-3-S02', '3-3', '選擇適當的未知數表示方式', 'S02', '根據題目方便程度選擇以誰為未知數。', 2, true),
    ('3-3-S03', '3-3', '將情境轉換為一元一次方程式', 'S03', '能根據敘述寫出正確的方程式。', 3, true),
    ('3-3-S04', '3-3', '解應用題方程式並檢查解釋', 'S04', '正確解出x後，能回到題目語境解釋結果。', 4, true),
    ('3-3-S05', '3-3', '價錢與折扣問題的建模', 'S05', '用一元一次方程式處理如「原價、折扣、總價」等。', 5, true),
    ('3-3-S06', '3-3', '行程問題（速度、時間、距離）', 'S06', '用 d=vt 建立方程式解決單一未知量問題。', 6, true),
    ('3-3-S07', '3-3', '工作與效率問題', 'S07', '用「工作量=效率×時間」概念解一元一次應用。', 7, true),
    ('3-3-S08', '3-3', '年齡、數量與差的問題', 'S08', '如「幾年前、幾年後」等問題以一元一次表示。', 8, true),
    ('3-3-S09', '3-3', '綜合文字題的解題策略', 'S09', '能讀題→畫圖或表格→設未知數→列式→解→檢查→回答。', 9, true);

-- 完成訊息
SELECT '更新完成！' AS message;
SELECT '3-1 代數式 題型數量：' || COUNT(*) FROM question_types WHERE chapter_id = '3-1';
SELECT '3-2 一元一次方程式 題型數量：' || COUNT(*) FROM question_types WHERE chapter_id = '3-2';
SELECT '3-3 一元一次應用問題 題型數量：' || COUNT(*) FROM question_types WHERE chapter_id = '3-3';

