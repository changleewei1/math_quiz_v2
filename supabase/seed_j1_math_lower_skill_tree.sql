-- 國一數學下學期：章節與題型（依技能樹建立）
-- 章節 ID 規則：m1-{章}-{節}-l（加上 -l 避免與上學期重複）
-- 題型 ID 規則：{chapter_id}-{序號}（序號對應 S01=1, S02=2...）
-- 題型代碼：S01, S02, ...

-- 1) 章節
INSERT INTO chapters (id, title, sort_order, is_active, grade_id, term)
VALUES
  ('m1-1-1-l', '二元一次方程式', 1, true, 'J1-MATH', 'lower'),
  ('m1-1-2-l', '解二元一次聯立方程式', 2, true, 'J1-MATH', 'lower'),
  ('m1-1-3-l', '應用問題', 3, true, 'J1-MATH', 'lower'),
  ('m1-2-1-l', '直角坐標平面', 4, true, 'J1-MATH', 'lower'),
  ('m1-2-2-l', '二元一次方程式的圖形', 5, true, 'J1-MATH', 'lower'),
  ('m1-3-1-l', '比例式', 6, true, 'J1-MATH', 'lower'),
  ('m1-3-2-l', '正比與反比', 7, true, 'J1-MATH', 'lower'),
  ('m1-4-1-l', '認識一元一次不等式', 8, true, 'J1-MATH', 'lower'),
  ('m1-4-2-l', '解一元一次不等式', 9, true, 'J1-MATH', 'lower'),
  ('m1-5-1-l', '統計圖表與資料分析', 10, true, 'J1-MATH', 'lower'),
  ('m1-6-1-l', '垂直、線對稱與三視圖', 11, true, 'J1-MATH', 'lower')
ON CONFLICT (id) DO UPDATE SET
  title = EXCLUDED.title,
  sort_order = EXCLUDED.sort_order,
  is_active = EXCLUDED.is_active,
  grade_id = EXCLUDED.grade_id,
  term = EXCLUDED.term;

-- 2) 題型（依技能樹）
INSERT INTO question_types (id, chapter_id, name, code, description, sort_order, is_active)
VALUES
  -- 1-1 二元一次方程式
  ('m1-1-1-l-1', 'm1-1-1-l', '二元一次方程式的形式與定義', 'S01', '理解二元一次方程式含有兩個未知數（通常為 x、y），且未知數的最高次方為 1，一般形式可寫成 ax + by = c。', 1, true),
  ('m1-1-1-l-2', 'm1-1-1-l', '判斷是否為二元一次方程式', 'S02', '能閱讀一個代數式，判斷其是否為「方程式」、是否為「二元」、是否為「一次」。', 2, true),
  ('m1-1-1-l-3', 'm1-1-1-l', '二元一次方程式的解的意義', 'S03', '理解解的形式為 (x, y)，必須同時代入方程式左右兩邊後「成立」，代表此數對使方程式成立。', 3, true),
  ('m1-1-1-l-4', 'm1-1-1-l', '代入驗證是否為方程式的解', 'S04', '給定一個數對 (x, y)，能將 x、y 依序代入方程式，計算左右兩邊是否相等以判斷是否為解。', 4, true),
  ('m1-1-1-l-5', 'm1-1-1-l', '整理為標準形式 ax + by = c', 'S05', '能將等價的二元一次方程式透過移項、合併同類項整理成 ax + by = c 的標準形式。', 5, true),
  ('m1-1-1-l-6', 'm1-1-1-l', '以方程式描述生活情境', 'S06', '能將簡單的生活敘述（如售票問題、錢幣組合）轉成二元一次方程式，例如成人票 x 張、學生票 y 張、總價 500 元可寫成 50x + 30y = 500。', 6, true),

  -- 1-2 解二元一次聯立方程式
  ('m1-1-2-l-1', 'm1-1-2-l', '聯立方程式與同時成立的概念', 'S01', '理解聯立方程式由兩個方程式組成，解必須同時使兩個方程式都成立。', 1, true),
  ('m1-1-2-l-2', 'm1-1-2-l', '聯立方程式解的類型', 'S02', '理解二元一次聯立方程式可能出現三種情況：唯一解（兩線交於一點）、無解（兩線平行）、無限多解（兩線重合）。', 2, true),
  ('m1-1-2-l-3', 'm1-1-2-l', '解法分類：代入法與加減法', 'S03', '理解解聯立方程式時常用的兩種方法：代入法（先在一式中解出某變數再代入另一式）與加減法（透過倍數使某變數係數相反後相加或相減消元）。', 3, true),
  ('m1-1-2-l-4', 'm1-1-2-l', '代入法求解聯立方程式', 'S04', '能選擇較容易解出變數的一式，先解出 x 或 y，再代入另一式，最後回代求出另一變數。', 4, true),
  ('m1-1-2-l-5', 'm1-1-2-l', '代入法中的括號與負號處理', 'S05', '在將 y = ax + b 代入另一式時，能正確以 (ax + b) 的形式帶入並正確展開，特別注意負號與乘法的分配。', 5, true),
  ('m1-1-2-l-6', 'm1-1-2-l', '加減法（消元法）求解聯立方程式', 'S06', '能透過將兩個方程式的某個變數係數調整成相反數，利用加總或相減以消去該變數，再解出另一變數。', 6, true),
  ('m1-1-2-l-7', 'm1-1-2-l', '選擇適當倍數進行加減法', 'S07', '能判斷兩方程式中某一變數的係數，選擇最小公倍數或合適倍數，使計算過程較為簡潔。', 7, true),
  ('m1-1-2-l-8', 'm1-1-2-l', '檢查聯立方程式的解是否正確', 'S08', '解出 (x, y) 後，能將其代入兩個原方程式，確認是否同時成立，以避免計算錯誤或寫錯式。', 8, true),
  ('m1-1-2-l-9', 'm1-1-2-l', '選擇適合的解法（代入或加減）', 'S09', '能閱讀一組聯立方程式，根據係數結構、是否已有解出的變數形式，選擇較有效率的代入法或加減法。', 9, true),
  ('m1-1-2-l-10', 'm1-1-2-l', '由文字敘述建立聯立方程式', 'S10', '能從生活敘述題（如票價問題、雞兔同籠、和差問題）中抓出兩個獨立條件，設定變數並寫出對應的兩個方程式。', 10, true),
  ('m1-1-2-l-11', 'm1-1-2-l', '錯誤類型辨識與反思', 'S11', '能辨識在解聯立方程式時常見的錯誤類型，例如：代入錯誤、倍數選錯、符號錯、漏回代等，並試著修正。', 11, true),

  -- 1-3 應用問題
  ('m1-1-3-l-1', 'm1-1-3-l', '應用題的本質：語意轉代數', 'S01', '理解解應用題的核心在於把文字敘述轉換成代數模型（方程式），而不只是計算。', 1, true),
  ('m1-1-3-l-2', 'm1-1-3-l', '變數設定與語意一致性', 'S02', '能為題目中的未知量設定明確的變數，並保持在整個解題過程中的一致性。', 2, true),
  ('m1-1-3-l-3', 'm1-1-3-l', '由敘述找出關鍵條件與關係', 'S03', '能從文本中找出「總共多少」「相差多少」「幾倍關係」「固定總量」等關鍵詞，並將其轉換成方程式。', 3, true),
  ('m1-1-3-l-4', 'm1-1-3-l', '標準應用題解題流程（讀題→設元→列式→求解→檢查）', 'S04', '掌握五步驟：讀題、設定變數、列方程式、求解、檢查解是否合理（包括是否為正、是否符合語意）。', 4, true),
  ('m1-1-3-l-5', 'm1-1-3-l', '和差問題建模', 'S05', '能將「和為多少」「差為多少」的文字敘述轉成 x + y = 和、x − y = 差 的方程式。', 5, true),
  ('m1-1-3-l-6', 'm1-1-3-l', '雞兔同籠與腳數問題', 'S06', '理解腳數問題的常見建模方式：x + y = 總隻數、2x + 4y = 總腳數，並能依情境調整係數。', 6, true),
  ('m1-1-3-l-7', 'm1-1-3-l', '票價與費用問題', 'S07', '能處理成人票、學生票等不同單價的組合問題，正確建立張數與總金額的二元一次方程式。', 7, true),
  ('m1-1-3-l-8', 'm1-1-3-l', '工作量與速率的基礎應用', 'S08', '理解固定工作量的情境下，人數與天數的關係；能用聯立或比例建立模型。', 8, true),

  -- 2-1 直角坐標平面
  ('m1-2-1-l-1', 'm1-2-1-l', '直角坐標平面與原點概念', 'S01', '理解由互相垂直的 x 軸與 y 軸構成的平面，原點為兩軸交會點 (0, 0)。', 1, true),
  ('m1-2-1-l-2', 'm1-2-1-l', '四象限與正負號關係', 'S02', '理解四象限編號及其對應的座標符號：第一象限(+,+)、第二象限(−,+)、第三象限(−,−)、第四象限(+,-)。', 2, true),
  ('m1-2-1-l-3', 'm1-2-1-l', '座標點 (x, y) 的順序與意義', 'S03', '理解 (x, y) 代表先水平、後垂直的位置，順序不能對調。', 3, true),
  ('m1-2-1-l-4', 'm1-2-1-l', '在坐標平面上標示座標點', 'S04', '從原點出發，先水平移動 x 單位，再垂直移動 y 單位，最後標記點的位置。', 4, true),
  ('m1-2-1-l-5', 'm1-2-1-l', '由圖讀出點的座標', 'S05', '能從坐標平面中的點，正確讀出其 x、y 值。', 5, true),
  ('m1-2-1-l-6', 'm1-2-1-l', '比較點的左右與上下位置', 'S06', '透過比較 x 值判斷左右、比較 y 值判斷上下，理解點與點之間的相對位置關係。', 6, true),
  ('m1-2-1-l-7', 'm1-2-1-l', '在生活情境中使用座標描述位置', 'S07', '能將簡單地圖、棋盤格、遊戲畫面中的位置以坐標形式表示與判讀。', 7, true),

  -- 2-2 二元一次方程式的圖形
  ('m1-2-2-l-1', 'm1-2-2-l', '二元一次方程式的圖形為直線', 'S01', '理解 ax + by = c 在坐標平面上的圖形是一條直線，由無限多個滿足方程式的點組成。', 1, true),
  ('m1-2-2-l-2', 'm1-2-2-l', '直線上的點與方程式解的對應', 'S02', '理解若 (x, y) 在直線上，代入方程式會成立；反之，不在直線上的點代入不會成立。', 2, true),
  ('m1-2-2-l-3', 'm1-2-2-l', 'x 截距與 y 截距的意義', 'S03', '理解 x 截距為圖形與 x 軸的交點（令 y = 0 求得），y 截距為圖形與 y 軸的交點（令 x = 0 求得）。', 3, true),
  ('m1-2-2-l-4', 'm1-2-2-l', '利用截距法繪製直線', 'S04', '透過令 y=0 求 x 截距、令 x=0 求 y 截距，取得兩點後連線畫出直線。', 4, true),
  ('m1-2-2-l-5', 'm1-2-2-l', '利用代點法繪製直線', 'S05', '選擇幾個方便的 x（或 y）值代入方程式，求出對應的 y（或 x），再將點連成直線。', 5, true),
  ('m1-2-2-l-6', 'm1-2-2-l', '從圖形估計方程式參數', 'S06', '能從已知的直線圖形中找出兩點，利用斜率與截距反推出可能的方程式。', 6, true),
  ('m1-2-2-l-7', 'm1-2-2-l', '圖形與聯立方程式解的關係', 'S07', '理解兩條直線的交點就是對應聯立方程式的解；平行表示無解；重合表示無限多解。', 7, true),

  -- 3-1 比例式
  ('m1-3-1-l-1', 'm1-3-1-l', '比與比值的概念', 'S01', '理解比 a:b 表示兩數之間的相對關係，可用分數 a/b 表示，並可進一步化簡。', 1, true),
  ('m1-3-1-l-2', 'm1-3-1-l', '比例式的定義 a:b = c:d', 'S02', '理解比例式是兩個比相等的關係，可寫成 a/b = c/d，且 b、d 不可為 0。', 2, true),
  ('m1-3-1-l-3', 'm1-3-1-l', '內項與外項', 'S03', '理解 a:b = c:d 中，a、d 為外項，b、c 為內項，此概念用於交叉相乘。', 3, true),
  ('m1-3-1-l-4', 'm1-3-1-l', '交叉相乘求未知數', 'S04', '利用 a:b = c:d 可得 a·d = b·c，進而求出比例式中的未知數。', 4, true),
  ('m1-3-1-l-5', 'm1-3-1-l', '設定比例式求解應用問題', 'S05', '能根據題目中的「對應關係」設定正確的比例式，如模型縮尺、配方比例。', 5, true),
  ('m1-3-1-l-6', 'm1-3-1-l', '比例尺與實際距離的換算', 'S06', '理解比例尺 = 圖上距離:實際距離，能在地圖與實際距離之間進行換算。', 6, true),
  ('m1-3-1-l-7', 'm1-3-1-l', '配方與濃度的比例應用', 'S07', '能用比例式處理混合、調配問題，如果汁、藥水濃度等。', 7, true),

  -- 3-2 正比與反比
  ('m1-3-2-l-1', 'm1-3-2-l', '正比的定義與特徵', 'S01', '兩量成正比時，y 與 x 滿足 y = kx（k 為常數），y/x 為固定值，圖形為通過原點的直線。', 1, true),
  ('m1-3-2-l-2', 'm1-3-2-l', '反比的定義與特徵', 'S02', '兩量成反比時，滿足 y = k/x，x·y 為固定常數，圖形為不通過原點的雙曲線。', 2, true),
  ('m1-3-2-l-3', 'm1-3-2-l', '由表格判斷正比或反比', 'S03', '能利用 y/x 是否固定與 x·y 是否固定來判斷兩量是否為正比、反比或皆不是。', 3, true),
  ('m1-3-2-l-4', 'm1-3-2-l', '建立正比式與求常數 k', 'S04', '在已知 y 與 x 成正比且給定一組數據時，能建立 y = kx 並求出 k = y/x。', 4, true),
  ('m1-3-2-l-5', 'm1-3-2-l', '建立反比式與求常數 k', 'S05', '在已知 y 與 x 成反比且給定一組數據時，能建立 y = k/x 並求出 k = x·y。', 5, true),
  ('m1-3-2-l-6', 'm1-3-2-l', '利用正比式或反比式求未知量', 'S06', '在已知正比或反比關係與一部分數據時，能透過公式代入求出未知的 x 或 y。', 6, true),
  ('m1-3-2-l-7', 'm1-3-2-l', '正比應用：單價與數量、距離與時間', 'S07', '能將固定單價或固定速率的情況建模為正比關係，並正確解題。', 7, true),
  ('m1-3-2-l-8', 'm1-3-2-l', '反比應用：人數與工作時間、速度與時間', 'S08', '能在固定總量的情境下（固定工作量或固定距離）建立 x·y = k 的反比關係。', 8, true),
  ('m1-3-2-l-9', 'm1-3-2-l', '混合判斷與綜合題', 'S09', '在題目中同時出現正比與反比關係時，能分辨哪一段是正比、哪一段是反比，並分段處理。', 9, true),

  -- 4-1 認識一元一次不等式
  ('m1-4-1-l-1', 'm1-4-1-l', '不等式與大小關係', 'S01', '理解不等式用來表達兩數大小關係，常見符號有 >、<、≥、≤，解通常是一個範圍而非單一數。', 1, true),
  ('m1-4-1-l-2', 'm1-4-1-l', '不等號方向與數線上的位置', 'S02', '理解 a > b 代表 a 在數線上位於 b 的右側，a < b 代表 a 在 b 的左側。', 2, true),
  ('m1-4-1-l-3', 'm1-4-1-l', '開圓點與實心點表示端點是否包含', 'S03', '理解 >、< 對應開圓點，不包含端點；≥、≤ 對應實心點，包含端點。', 3, true),
  ('m1-4-1-l-4', 'm1-4-1-l', '將簡單不等式畫在數線上', 'S04', '能將如 x > a、x ≥ a 等不等式正確轉換成數線上的端點與箭頭。', 4, true),
  ('m1-4-1-l-5', 'm1-4-1-l', '由數線反推不等式', 'S05', '能根據數線上的端點（開或實）、箭頭方向寫出對應的不等式。', 5, true),
  ('m1-4-1-l-6', 'm1-4-1-l', '文字敘述與不等式的轉換', 'S06', '能理解「至少」「至多」「不小於」「不超過」等詞語與不等號的對應關係。', 6, true),
  ('m1-4-1-l-7', 'm1-4-1-l', '生活情境中範圍的理解', 'S07', '能將身高限制、重量限制、分數限制等情境轉成不等式並用數線表示。', 7, true),

  -- 4-2 解一元一次不等式
  ('m1-4-2-l-1', 'm1-4-2-l', '一元一次不等式的解集是範圍', 'S01', '理解解一元一次不等式所得的不是單一數，而是一整段數的集合，可用數線或區間表示。', 1, true),
  ('m1-4-2-l-2', 'm1-4-2-l', '利用加減法解不等式（符號不變）', 'S02', '能像解方程式一樣，對不等式兩邊同加或同減同一數，不改變不等號方向。', 2, true),
  ('m1-4-2-l-3', 'm1-4-2-l', '乘除正數時不改變不等號方向', 'S03', '理解當兩邊同乘或同除正數時，不等號方向保持不變。', 3, true),
  ('m1-4-2-l-4', 'm1-4-2-l', '乘除負數時必須反向', 'S04', '理解當兩邊同乘或同除負數時，不等號需反向，這是解不等式最關鍵的技巧之一。', 4, true),
  ('m1-4-2-l-5', 'm1-4-2-l', '含括號的一元一次不等式解法', 'S05', '先展開括號，再進行移項與乘除操作，最後注意是否有乘除負數導致不等號反向。', 5, true),
  ('m1-4-2-l-6', 'm1-4-2-l', '含分母的一元一次不等式', 'S06', '能將含有分母的式子透過乘以分母消去分母，並注意分母的正負決定是否反向。', 6, true),
  ('m1-4-2-l-7', 'm1-4-2-l', '解集的數線表示與反推', 'S07', '把代數形式的解轉成數線表示（開/實心點＋箭頭），或由數線反推回不等式。', 7, true),
  ('m1-4-2-l-8', 'm1-4-2-l', '由文字敘述建構一元一次不等式', 'S08', '將「至少」「不超過」「多於」「少於」等語句正確轉成一元一次不等式表達，並解出範圍。', 8, true),
  ('m1-4-2-l-9', 'm1-4-2-l', '解答合理性與代入檢查', 'S09', '能選擇解集中適當的代表值代入原不等式，檢查整體解是否合理；並注意條件例如「整數解」「非負解」等。', 9, true),

  -- 5-1 統計圖表與資料分析
  ('m1-5-1-l-1', 'm1-5-1-l', '次數與累積次數的概念', 'S01', '理解次數為各組的人數或次數，累積次數為由小到大逐組累加的總和，須遞增或持平。', 1, true),
  ('m1-5-1-l-2', 'm1-5-1-l', '相對次數與累積相對次數', 'S02', '理解相對次數 = 次數/總人數；累積相對次數 = 累積次數/總人數，可解釋為「比例」或「百分比」。', 2, true),
  ('m1-5-1-l-3', 'm1-5-1-l', '折線圖與累積折線圖的區別', 'S03', '折線圖呈現各組的次數變化；累積折線圖呈現累積次數或累積相對次數，曲線應為不下降的折線。', 3, true),
  ('m1-5-1-l-4', 'm1-5-1-l', '建立次數分配表', 'S04', '給定一組資料，能適當分組並計算每組出現次數，完成次數分配表。', 4, true),
  ('m1-5-1-l-5', 'm1-5-1-l', '計算累積次數與累積相對次數', 'S05', '能由次數欄向下累加得到累積次數，再除以總人數得到累積相對次數。', 5, true),
  ('m1-5-1-l-6', 'm1-5-1-l', '繪製累積次數或累積相對次數折線圖', 'S06', '以各組的「上限值」作為 x 座標，以累積次數或累積相對次數作為 y 座標，將點連成折線。', 6, true),
  ('m1-5-1-l-7', 'm1-5-1-l', '根據表格回答「小於/至少」的人數或比例', 'S07', '能利用累積次數或累積相對次數判斷小於某分數、至少某分數的人數或比例。', 7, true),
  ('m1-5-1-l-8', 'm1-5-1-l', '利用圖形比較兩組資料分布', 'S08', '使用折線圖或累積折線圖比較兩班（或兩組）成績分布，如哪一組高分比例較多。', 8, true),

  -- 6-1 垂直、線對稱與三視圖
  ('m1-6-1-l-1', 'm1-6-1-l', '垂直的定義與直角判斷', 'S01', '兩線相交且形成 90° 直角即為垂直；垂直線會形成四個直角。', 1, true),
  ('m1-6-1-l-2', 'm1-6-1-l', '線對稱與對稱軸的概念', 'S02', '若一圖形可沿某直線對折後完全重合，該圖形為線對稱圖形，此直線為對稱軸。', 2, true),
  ('m1-6-1-l-3', 'm1-6-1-l', '三視圖的三種視角', 'S03', '理解前視圖、上視圖與右視圖分別代表從正面、上方與右側看到的形狀，是物體的正投影而非透視圖。', 3, true),
  ('m1-6-1-l-4', 'm1-6-1-l', '判斷線段是否垂直', 'S04', '利用直角標記、方格紙或量角器檢查兩線是否成直角。', 4, true),
  ('m1-6-1-l-5', 'm1-6-1-l', '檢查圖形是否為線對稱', 'S05', '找出可能的對稱軸，檢查對應點到軸的距離與連線是否垂直於軸。', 5, true),
  ('m1-6-1-l-6', 'm1-6-1-l', '畫出圖形對某軸的對稱圖', 'S06', '已知原圖形與對稱軸，能找出每一點到軸的距離並在另一側等距標出對應點，最後連線。', 6, true),
  ('m1-6-1-l-7', 'm1-6-1-l', '由立體圖畫出三視圖', 'S07', '能觀察立體圖，分別畫出前視圖、上視圖與右視圖的輪廓。', 7, true),
  ('m1-6-1-l-8', 'm1-6-1-l', '由三視圖重建立體形狀', 'S08', '能整合前視圖、上視圖與右視圖的信息，想像並判斷對應的立體形狀。', 8, true),
  ('m1-6-1-l-9', 'm1-6-1-l', '生活中對稱與垂直的觀察', 'S09', '能在建築、標誌、自然物體中辨認垂直與線對稱現象，並用幾何語言描述。', 9, true)
ON CONFLICT (id) DO UPDATE SET
  chapter_id = EXCLUDED.chapter_id,
  name = EXCLUDED.name,
  code = EXCLUDED.code,
  description = EXCLUDED.description,
  sort_order = EXCLUDED.sort_order,
  is_active = EXCLUDED.is_active;

