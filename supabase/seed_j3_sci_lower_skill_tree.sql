-- 國三理化下學期：章節與題型（依技能樹建立）
-- 章節 ID 規則：p3b-{章}-{節}
-- 題型 ID 規則：{chapter_id}-{序號}

-- 1) 章節
INSERT INTO chapters (id, title, sort_order, is_active, grade_id, term)
VALUES
  ('p3b-1-1', '電流的熱效應與電能', 1, true, 'J3-SCI', 'lower'),
  ('p3b-1-2', '電與生活', 2, true, 'J3-SCI', 'lower'),
  ('p3b-1-3', '電池', 3, true, 'J3-SCI', 'lower'),
  ('p3b-1-4', '電流的化學效應', 4, true, 'J3-SCI', 'lower'),
  ('p3b-2-1', '磁鐵與磁場', 5, true, 'J3-SCI', 'lower'),
  ('p3b-2-2', '電流的磁效應', 6, true, 'J3-SCI', 'lower'),
  ('p3b-2-3', '電流與磁場的交互作用', 7, true, 'J3-SCI', 'lower'),
  ('p3b-2-4', '電磁感應', 8, true, 'J3-SCI', 'lower')
ON CONFLICT (id) DO UPDATE SET
  title = EXCLUDED.title,
  sort_order = EXCLUDED.sort_order,
  is_active = EXCLUDED.is_active,
  grade_id = EXCLUDED.grade_id,
  term = EXCLUDED.term;

-- 2) 題型（依技能樹）
INSERT INTO question_types (id, chapter_id, name, code, description, sort_order, is_active)
VALUES
  -- 1-1 電流的熱效應與電能
  ('p3b-1-1-1', 'p3b-1-1', '電流熱效應的意義', 'P3B-1-1-01', '理解電流通過導體會產生熱能。', 1, true),
  ('p3b-1-1-2', 'p3b-1-1', '熱效應的成因', 'P3B-1-1-02', '理解導體電阻造成電能轉為熱能。', 2, true),
  ('p3b-1-1-3', 'p3b-1-1', '電能的概念', 'P3B-1-1-03', '理解電能是電流做功所轉換的能量。', 3, true),
  ('p3b-1-1-4', 'p3b-1-1', '電能計算公式', 'P3B-1-1-04', '能使用電能＝功率×時間計算。', 4, true),
  ('p3b-1-1-5', 'p3b-1-1', '電費單位的理解', 'P3B-1-1-05', '理解度（kWh）為電能單位。', 5, true),
  ('p3b-1-1-6', 'p3b-1-1', '熱效應與安全', 'P3B-1-1-06', '能判斷過熱造成的危險。', 6, true),
  ('p3b-1-1-7', 'p3b-1-1', '電熱器具的應用', 'P3B-1-1-07', '能解釋電熱器工作原理。', 7, true),
  ('p3b-1-1-8', 'p3b-1-1', '節能與用電選擇', 'P3B-1-1-08', '能比較不同電器的耗電差異。', 8, true),

  -- 1-2 電與生活
  ('p3b-1-2-1', 'p3b-1-2', '家庭用電的基本概念', 'P3B-1-2-01', '理解電力是現代生活的重要能源。', 1, true),
  ('p3b-1-2-2', 'p3b-1-2', '用電安全觀念', 'P3B-1-2-02', '理解不當用電會造成危險。', 2, true),
  ('p3b-1-2-3', 'p3b-1-2', '電器功率標示', 'P3B-1-2-03', '理解電器標示的功率代表耗電速率。', 3, true),
  ('p3b-1-2-4', 'p3b-1-2', '家庭用電耗能估算', 'P3B-1-2-04', '能估算多個電器的耗電量。', 4, true),
  ('p3b-1-2-5', 'p3b-1-2', '用電負載判斷', 'P3B-1-2-05', '能判斷是否超過安全負載。', 5, true),
  ('p3b-1-2-6', 'p3b-1-2', '節能行為的判斷', 'P3B-1-2-06', '能判斷哪些行為較省電。', 6, true),
  ('p3b-1-2-7', 'p3b-1-2', '用電與生活品質', 'P3B-1-2-07', '能說明電力與生活品質的關係。', 7, true),

  -- 1-3 電池
  ('p3b-1-3-1', 'p3b-1-3', '電池的基本功能', 'P3B-1-3-01', '理解電池能提供穩定電壓。', 1, true),
  ('p3b-1-3-2', 'p3b-1-3', '電池內部原理', 'P3B-1-3-02', '理解電池內部的化學反應產生電能。', 2, true),
  ('p3b-1-3-3', 'p3b-1-3', '一次電池與二次電池', 'P3B-1-3-03', '理解不可充電與可充電電池差異。', 3, true),
  ('p3b-1-3-4', 'p3b-1-3', '電池串並聯的效果', 'P3B-1-3-04', '理解串聯增電壓、並聯增供電能力。', 4, true),
  ('p3b-1-3-5', 'p3b-1-3', '電池組合的電壓計算', 'P3B-1-3-05', '能計算串聯電池的總電壓。', 5, true),
  ('p3b-1-3-6', 'p3b-1-3', '電池選用判斷', 'P3B-1-3-06', '能依需求選擇合適電池。', 6, true),
  ('p3b-1-3-7', 'p3b-1-3', '電池回收與環保', 'P3B-1-3-07', '能說明電池回收的重要性。', 7, true),

  -- 1-4 電流的化學效應
  ('p3b-1-4-1', 'p3b-1-4', '電流化學效應的意義', 'P3B-1-4-01', '理解電流通過溶液會引發化學變化。', 1, true),
  ('p3b-1-4-2', 'p3b-1-4', '電解的基本概念', 'P3B-1-4-02', '理解電解需通電與電解質。', 2, true),
  ('p3b-1-4-3', 'p3b-1-4', '電鍍的原理', 'P3B-1-4-03', '理解電鍍是利用電流使金屬附著。', 3, true),
  ('p3b-1-4-4', 'p3b-1-4', '電解實驗結果判讀', 'P3B-1-4-04', '能判斷電解產物與位置。', 4, true),
  ('p3b-1-4-5', 'p3b-1-4', '電鍍實驗的變因判斷', 'P3B-1-4-05', '能判斷影響電鍍效果的因素。', 5, true),
  ('p3b-1-4-6', 'p3b-1-4', '電流化學效應的應用', 'P3B-1-4-06', '能舉例電解與電鍍的生活應用。', 6, true),

  -- 2-1 磁鐵與磁場
  ('p3b-2-1-1', 'p3b-2-1', '磁鐵的基本性質', 'P3B-2-1-01', '理解磁鐵具有南北兩極，異極相吸、同極相斥。', 1, true),
  ('p3b-2-1-2', 'p3b-2-1', '磁極不可分性', 'P3B-2-1-02', '理解磁鐵不可能只剩單一磁極。', 2, true),
  ('p3b-2-1-3', 'p3b-2-1', '磁場的概念', 'P3B-2-1-03', '理解磁場是磁力作用的空間。', 3, true),
  ('p3b-2-1-4', 'p3b-2-1', '磁力線的意義', 'P3B-2-1-04', '理解磁力線用來表示磁場方向與強弱。', 4, true),
  ('p3b-2-1-5', 'p3b-2-1', '磁力線方向判讀', 'P3B-2-1-05', '能判讀磁力線由 N 極指向 S 極。', 5, true),
  ('p3b-2-1-6', 'p3b-2-1', '磁場強弱比較', 'P3B-2-1-06', '能依磁力線疏密判斷磁場強弱。', 6, true),
  ('p3b-2-1-7', 'p3b-2-1', '生活中的磁鐵應用', 'P3B-2-1-07', '能舉出磁鐵在生活中的應用。', 7, true),

  -- 2-2 電流的磁效應
  ('p3b-2-2-1', 'p3b-2-2', '通電導線一定產生磁場', 'P3B-2-2-01', '理解只要有電流，就一定有磁場。', 1, true),
  ('p3b-2-2-2', 'p3b-2-2', '不通電時無磁效應', 'P3B-2-2-02', '理解未通電時不會產生磁場。', 2, true),
  ('p3b-2-2-3', 'p3b-2-2', '右手定則三指意義', 'P3B-2-2-03', '理解拇指代表電流方向，其餘手指代表磁場方向。', 3, true),
  ('p3b-2-2-4', 'p3b-2-2', '電流方向反轉的影響', 'P3B-2-2-04', '理解電流方向改變，磁場方向也改變。', 4, true),
  ('p3b-2-2-5', 'p3b-2-2', '紙面進出判讀', 'P3B-2-2-05', '能正確判斷磁場出紙面或入紙面。', 5, true),
  ('p3b-2-2-6', 'p3b-2-2', '電流大小與磁性', 'P3B-2-2-06', '理解電流越大磁場越強。', 6, true),
  ('p3b-2-2-7', 'p3b-2-2', '線圈圈數的影響', 'P3B-2-2-07', '理解線圈圈數增加磁性增強。', 7, true),
  ('p3b-2-2-8', 'p3b-2-2', '鐵心的作用', 'P3B-2-2-08', '理解加入鐵心可增強磁性。', 8, true),

  -- 2-3 電流與磁場的交互作用
  ('p3b-2-3-1', 'p3b-2-3', '通電導線在磁場中會受力', 'P3B-2-3-01', '理解同時有電流與磁場才會受力。', 1, true),
  ('p3b-2-3-2', 'p3b-2-3', '受力不等於一定旋轉', 'P3B-2-3-02', '理解是否旋轉與結構有關。', 2, true),
  ('p3b-2-3-3', 'p3b-2-3', '左手定則三指意義', 'P3B-2-3-03', '理解磁場、電流、受力三者方向。', 3, true),
  ('p3b-2-3-4', 'p3b-2-3', '受力方向判斷', 'P3B-2-3-04', '能用左手定則判斷導線受力方向。', 4, true),
  ('p3b-2-3-5', 'p3b-2-3', '馬達原理', 'P3B-2-3-05', '理解馬達是「導線受力→轉動」。', 5, true),
  ('p3b-2-3-6', 'p3b-2-3', '馬達與發電機區分', 'P3B-2-3-06', '能區分馬達與發電機功能。', 6, true),

  -- 2-4 電磁感應
  ('p3b-2-4-1', 'p3b-2-4', '感應一定需要磁場改變', 'P3B-2-4-A01', '理解「只有磁場改變」才會產生感應電流。', 1, true),
  ('p3b-2-4-2', 'p3b-2-4', '改變包含靠近與遠離', 'P3B-2-4-A02', '理解磁鐵靠近或遠離線圈都屬於改變。', 2, true),
  ('p3b-2-4-3', 'p3b-2-4', '靜止不等於感應', 'P3B-2-4-A03', '理解「有磁場 ≠ 有感應」。', 3, true),
  ('p3b-2-4-4', 'p3b-2-4', '改變速度影響電流大小', 'P3B-2-4-B01', '理解磁場改變越快，感應電流越大。', 4, true),
  ('p3b-2-4-5', 'p3b-2-4', '圈數影響感應強弱', 'P3B-2-4-B02', '理解線圈圈數越多，感應越明顯。', 5, true),
  ('p3b-2-4-6', 'p3b-2-4', '感應方向取決於變化方向', 'P3B-2-4-C01', '理解「靠近 vs 遠離」會造成相反方向的電流。', 6, true),
  ('p3b-2-4-7', 'p3b-2-4', '磁極方向影響感應方向', 'P3B-2-4-C02', '理解 N 極與 S 極靠近時方向不同。', 7, true),
  ('p3b-2-4-8', 'p3b-2-4', '圖像中的電流方向判讀', 'P3B-2-4-C03', '能由圖判斷電流方向。', 8, true),
  ('p3b-2-4-9', 'p3b-2-4', '發電機與馬達的能量轉換', 'P3B-2-4-D01', '理解發電機是「機械能→電能」。', 9, true),
  ('p3b-2-4-10', 'p3b-2-4', '是否需要外加電源', 'P3B-2-4-D02', '理解發電機不需要外接電池。', 10, true)
ON CONFLICT (id) DO UPDATE SET
  chapter_id = EXCLUDED.chapter_id,
  name = EXCLUDED.name,
  code = EXCLUDED.code,
  description = EXCLUDED.description,
  sort_order = EXCLUDED.sort_order,
  is_active = EXCLUDED.is_active;


